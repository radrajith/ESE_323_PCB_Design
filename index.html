<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Ese 323 pcb design by radrajith</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Ese 323 pcb design</h1>
        <h2>Modern Circuit Board Design and Prototyping</h2>
        <a href="https://github.com/radrajith/ESE_323_PCB_Design" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h2>
<a id="welcome-to-my-ese-323-project-page" class="anchor" href="#welcome-to-my-ese-323-project-page" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Welcome to my ESE 323 project page</h2>

<hr>

<h3>
<a id="description" class="anchor" href="#description" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Description</h3>

<p>ESE 323 is a Modern Circuit Board Design and Prototyping class taught by Prof Westerfeld. During this class, we are designing circuits using eagle cad software and also designing and building 3d models using Autocad. An Improved current meter will be designed and built for the final project. This current meter design is intended to minimize the effects of burden voltage that is present in the multimeters used in the lab and other facilites. </p>

<hr>

<hr>

<h3>
<a id="design-and-spec" class="anchor" href="#design-and-spec" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>design and spec</h3>

<p>Design drawing(initial version)
<img src="https://github.com/radrajith/ESE_323_PCB_Design/blob/master/Pictures/hand%20drawings/initial%20design.jpg?raw=true" alt="Initial design"></p>

<p>The current meter will be designed to read up to 7A. The maximum current rating is set to be 8A (the fuse will break at this point) and will only be able to read positive DC currents. The circuit can be powered by a battery with a voltage ranging from 2.5 to 5v, in this design 2-AAA battery is used as a power source i.e 3V source. The Analog current measurement will be sampled at 12kSPS (based on atxmega32 specs), and the digital output will have 12-bit resolution. </p>

<p>The current is read by measuring the voltage that flows across a shunt resistor. The shunt resistor is specially chosen to have current sense technology, where the resistors packs have 4 terminals, 2 for current flow, and 2 for current measurement. The voltage across the resistor is read using the Atxmega micro controller's built in Analog to digital converter(ADC). </p>

<p>Since the class is about coming with our own design and specs, I decided to add some extra feature to make this project cooler. A LCD touch screen is added to display the current readings such as peak, instantaneous, rms etc. In addition the LCD will be used to graph continuous data assuming I will finish the programming on time. Since the programming had to go through a number of revisions, a PDI communication will be implemented to modify the code as intended. In addition to serving as a normal current meter, A USB port will be added to monitor the current usage of mobile phone or other devices charged using USB. A micro usb port will be used as the input and USB as output. </p>

<hr>

<h3>
<a id="ideal-world-scenario" class="anchor" href="#ideal-world-scenario" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Ideal World Scenario</h3>

<p>The Atxmega32 comes equipped with amplifier of various ranges like 1/2x, 1x,2x,8x...64x. And since the internal bandgap reference voltage is used, the reference voltage will be a constant 1V. This means by using a 0.01 ohm resistor and using a amplification of 1/2x, the max current that can be read using the meter will be 200A. </p>

<hr>

<h3>
<a id="design-considerations-and-practical-limitations" class="anchor" href="#design-considerations-and-practical-limitations" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Design: Considerations and practical limitations</h3>

<ul>
<li>
<strong>Why 7A current limit?</strong>
The 4 terminal  resistors are available for different power rating for 0.01 ohms. For instance, if 5W rated resistor was implemented the maximum current it can handle would be 22.36A (sqrt(5/0.01)). However, larger current required the trace width of the PCB to be more than 0.4 inch/1cm width. Since the board size use for this design is 5cmx5cm, having a trace width of 1cm will require larger board which adds to the cost. In addition the resistor land pattern is quite small that having a trace causes overlaps. A 4mm/.16in trace is implemented in this design, which corresponds to 7-8A according to graph. </li>
</ul>

<p><img src="https://wiki.xtronics.com/images/7/74/PCB_current.png" alt="current vs width">
source: <a href="https://wiki.xtronics.com/index.php/Wire-Gauge_Ampacity">https://wiki.xtronics.com/index.php/Wire-Gauge_Ampacity</a></p>

<ul>
<li><strong>Using 0.5mohm vs 1mohm 4 terminal resistor?</strong></li>
</ul>

<p>Although the cost and sizing of both parts remain the same, for this design 0.01 mohm resistor is used. An ammeter ideally has 0 internal resistance, thus for a current meter design its desired to pick a shunt resistor with lowest resistance. However, I had to go with 1mOhm resistor due to the fact that at practical usage, there is resistance contributed from the solder and traces. This will cause error in measurement. In addition, the limitation also arises from the availability of amplifiers in the MCU. With a step voltage of 0.000244, using 0.5 mOhm resistor will reduce the minimum current that can be measured and also accuracy. Thus to have a smaller minimum current, better accuracy and less error a higher valued resistor was implemented.</p>

<ul>
<li>**Implementation of two display ports
In addition to a 14 pin header, a 4 pin header is added for i2c communication to provide an alternative display source in case the touch screen display malfunctions and the if the coding cannot be finished on time. </li>
</ul>

<hr>

<h3>
<a id="schematic-view" class="anchor" href="#schematic-view" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><strong>Schematic View</strong>
</h3>

<p>Page one
<img src="https://github.com/radrajith/ESE_323_PCB_Design/blob/master/Pictures/schmatic_page1.PNG?raw=true" alt="Page one">
Page two
<img src="https://github.com/radrajith/ESE_323_PCB_Design/blob/master/Pictures/schmatic_page2.PNG?raw=true" alt="page two"></p>

<h3>
<a id="board-view" class="anchor" href="#board-view" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><strong>Board view</strong>
</h3>

<p>Board layout
<img src="https://github.com/radrajith/ESE_323_PCB_Design/blob/master/Pictures/Board.PNG?raw=true" alt="board"></p>

<hr>

<h3>
<a id="gain-caluculations" class="anchor" href="#gain-caluculations" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Gain Caluculations</h3>

<p>Highlighted areas indicate the ADC readings. The gain will decrease as the voltage reading goes over 0.96V
<img src="https://github.com/radrajith/ESE_323_PCB_Design/blob/master/Pictures/gain%20calculation.png?raw=true" alt="gain"></p>

<h3>
<a id="parts-planned-to-used" class="anchor" href="#parts-planned-to-used" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Parts planned to used</h3>

<h4>
<a id="24-lcd-tft-display" class="anchor" href="#24-lcd-tft-display" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>2.4" LCD TFT Display</h4>

<p>Lcd touch screen display made by UXCELL, bought from <a href="https://www.amazon.com/240x320-Touch-Panel-Module-ILI9341/dp/B00W8TPNIK/ref=sr_1_5?ie=UTF8&amp;qid=1477094268&amp;sr=8-5&amp;keywords=uxcell+2.4+lcd">amazon.com</a>. The coding is going to be modelled after <a href="http://marekburiak.github.io/ILI9341_due/">ILI9341_due</a>
Front View
<img src="https://github.com/radrajith/ESE_323_PCB_Design/blob/master/Pictures/LCD%20TFT%20screen/front_view.jpg?raw=true" alt="Front View">
Rear View
<img src="https://github.com/radrajith/ESE_323_PCB_Design/blob/master/Pictures/LCD%20TFT%20screen/back_view.jpg?raw=true" alt="rear View">
Mechanical Drawings
<img src="https://github.com/radrajith/ESE_323_PCB_Design/blob/master/Pictures/LCD%20TFT%20screen/mechanical.jpg?raw=true" alt="Mechanical Drawing">
<a href="https://github.com/radrajith/ESE_323_PCB_Design/blob/master/Datasheets/TJC-024-9341%20lcd%20touch%20screen%20data%20sheet.pdf">TFT Datasheet</a>
<a href="https://github.com/radrajith/ESE_323_PCB_Design/blob/master/Datasheets/14%20pin%20header.pdf">14 pin header datasheet</a></p>

<h5>
<a id="eagle-pic" class="anchor" href="#eagle-pic" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Eagle pic</h5>

<p>14 pin Female header
<img src="https://github.com/radrajith/ESE_323_PCB_Design/blob/master/Pictures/LCD%20TFT%20screen/Female%20header%20pins.PNG?raw=true" alt="14 pin header"></p>

<hr>

<h4>
<a id="rgb-lcd-display-from-seeedstudio" class="anchor" href="#rgb-lcd-display-from-seeedstudio" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>RGB LCD Display from seeedstudio</h4>

<p>images
<img src="https://raw.githubusercontent.com/SeeedDocument/Grove_LCD_RGB_Backlight/master/images/intro.jpg" alt="RGB LCD">
source - seeedstudio</p>

<p><a href="http://wiki.seeed.cc/Grove-LCD_RGB_Backlight/">Datasheet</a></p>

<h5>
<a id="eagle-pic-1" class="anchor" href="#eagle-pic-1" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Eagle pic</h5>

<p>universal 4 pin grove connector
<img src="https://github.com/radrajith/ESE_323_PCB_Design/blob/master/Pictures/RGB%20LCD/universal%204%20pin%20connector.PNG?raw=true" alt="4 pin connector"></p>

<hr>

<h4>
<a id="micro-usb" class="anchor" href="#micro-usb" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Micro USB</h4>

<p>Eagle pic
<img src="https://github.com/radrajith/ESE_323_PCB_Design/blob/master/Pictures/micro%20usb.PNG?raw=true" alt="micro usb">
obtained from sparkfun eagle library
<a href="https://github.com/radrajith/ESE_323_PCB_Design/blob/master/Datasheets/micro%20usb%20mechanical.pdf">datasheet</a></p>

<h4>
<a id="usb" class="anchor" href="#usb" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>USB</h4>

<p>Eagle pic
<img src="https://github.com/radrajith/ESE_323_PCB_Design/blob/master/Pictures/usbpic.PNG?raw=true" alt="USB">
obtained from CON-Berg library</p>

<h4>
<a id="atxmega-processor" class="anchor" href="#atxmega-processor" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Atxmega Processor</h4>

<p>Datasheet
<a href="https://github.com/radrajith/ESE_323_PCB_Design/blob/master/Datasheets/xmega%20manual.pdf">long form</a>
<a href="https://github.com/radrajith/ESE_323_PCB_Design/blob/master/Datasheets/ATxmega32E5.pdf">short form</a></p>

<p>pinouts
<img src="https://github.com/radrajith/ESE_323_PCB_Design/blob/master/Pictures/Atxmega/pinouts.PNG?raw=true" alt="pinout">
taken from atmel xmega 32 datasheet</p>

<h5>
<a id="eagle-pic-2" class="anchor" href="#eagle-pic-2" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Eagle pic</h5>

<p><img src="https://github.com/radrajith/ESE_323_PCB_Design/blob/master/Pictures/Atxmega/atxmega32.PNG?raw=true" alt="xmega eagle"></p>

<hr>

<h4>
<a id="4-terminal-shunt-resistor" class="anchor" href="#4-terminal-shunt-resistor" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>4 Terminal shunt resistor</h4>

<p><a href="https://github.com/radrajith/ESE_323_PCB_Design/blob/master/Datasheets/4%20termianl%20resistor(correct%20one).pdf">datasheet</a></p>

<h5>
<a id="eagle-pic-3" class="anchor" href="#eagle-pic-3" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Eagle pic</h5>

<p><img src="https://github.com/radrajith/ESE_323_PCB_Design/blob/master/Pictures/4%20terminal%20resistor.PNG?raw=true" alt="shunt resistor"></p>

<h4>
<a id="jtag" class="anchor" href="#jtag" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Jtag</h4>

<p>The eagle file was modified from the 10 pin jtag obtained from jtag library</p>

<h5>
<a id="eagle-pic-4" class="anchor" href="#eagle-pic-4" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Eagle pic</h5>

<p><img src="https://github.com/radrajith/ESE_323_PCB_Design/blob/master/Pictures/jtag.PNG?raw=true" alt="jtag"></p>

<h4>
<a id="banana-plug" class="anchor" href="#banana-plug" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Banana plug</h4>

<p><a href="https://github.com/radrajith/ESE_323_PCB_Design/blob/master/Datasheets/banana%20plug.pdf">Datasheet</a></p>

<h5>
<a id="eagle-pic-5" class="anchor" href="#eagle-pic-5" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Eagle pic</h5>

<p><img src="https://github.com/radrajith/ESE_323_PCB_Design/blob/master/Pictures/banana%20plug.PNG?raw=true" alt="banplug"></p>

<h3>
<a id="bom" class="anchor" href="#bom" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>BOM</h3>

<hr>

<h3>
<a id="contact" class="anchor" href="#contact" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Contact</h3>

<p><a href="mailto:radrajith@gmail.com">radrajith@gmail.com</a> (2016)</p>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/radrajith/ESE_323_PCB_Design/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/radrajith/ESE_323_PCB_Design/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/radrajith/ESE_323_PCB_Design"></a> is maintained by <a href="https://github.com/radrajith">radrajith</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>
